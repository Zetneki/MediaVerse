<p-dialog
  header="Add to Library"
  [modal]="true"
  [visible]="visible()"
  (visibleChange)="onDialogVisibilityChange($event)"
  [draggable]="false"
  dismissableMask="true"
  class="dialog"
>
  <div class="content">
    <p-selectbutton
      [options]="movieModes"
      [(ngModel)]="selectedMode"
      optionLabel="label"
      optionValue="value"
      fluid="true"
      class="selectbutton"
      [disabled]="isLoading"
    >
      <ng-template let-item #item>
        <i [class]="item.icon"></i>
        <span>{{ item.label }}</span>
      </ng-template></p-selectbutton
    >

    <p-listbox
      [options]="movieModes"
      [(ngModel)]="selectedMode"
      optionLabel="label"
      optionValue="value"
      fluid="true"
      class="listbox"
      [disabled]="isLoading"
    >
      <ng-template let-item #item>
        <div class="listbox__item">
          <i [class]="item.icon"></i>
          <span>{{ item.label }}</span>
        </div>
      </ng-template>
    </p-listbox>

    @if (lastWatched != null) {
    <p>Saved at: {{ lastWatched | date}}</p>
    }

    <div class="content__buttons">
      @if (isLoading) {
      <p-progress-spinner
        strokeWidth="8"
        fill="transparent"
        animationDuration=".5s"
        [style]="{ width: '25px', height: '25px' }"
      />
      }
      <p-button
        label="Cancel"
        severity="secondary"
        (click)="close()"
        [disabled]="isLoading"
      />
      <p-button
        label="Save"
        severity="success"
        (click)="save()"
        [disabled]="isLoading"
      />
    </div>
  </div>
</p-dialog>
